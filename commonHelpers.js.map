{"version":3,"file":"commonHelpers.js","sources":["../src/js/api-service.js","../src/js/create-markup.js","../src/js/smooth-scroll.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '40948305-cf809bb8656872e1f12174930';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst perPage = 40;\n\nasync function fetchImages(searchInput, page) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${searchInput}&page=${page}&per_page=${perPage}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const response = await axios.get(url);\n\n  return {\n    data: response.data.hits,\n    totalPages: Math.ceil(response.data.totalHits / perPage),\n  };\n}\n\nexport { fetchImages };\n","function createMarkup(data) {\n  const { data: images } = data;\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n          <a class=\"photo-card__link\" href=\"${largeImageURL}\">\n            <img class=\"photo-card__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b> <span class=\"info-item__wrapper\">${likes}</span></p>\n              <p class=\"info-item\"><b>Views</b> <span class=\"info-item__wrapper\">${views}</span></p>\n              <p class=\"info-item\"><b>Comments</b> <span class=\"info-item__wrapper\">${comments}</span></p>\n              <p class=\"info-item\"><b>Downloads</b> <span class=\"info-item__wrapper\">${downloads}</span></p>\n            </div>\n          </a>\n        </div>`\n    )\n    .join('');\n}\n\nexport { createMarkup };\n","function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport { smoothScroll };\n","import { fetchImages } from './js/api-service';\nimport { createMarkup } from './js/create-markup';\nimport { smoothScroll } from './js/smooth-scroll';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nlet page = 1;\n\nconst inputForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.js-load');\n\ninputForm.addEventListener('submit', handlerSubmit);\nloadButton.addEventListener('click', handlerLoad);\n\nasync function handlerLoad() {\n  page += 1;\n  try {\n    const data = await fetchImages(inputForm.elements.searchQuery.value, page);\n    gallery.innerHTML += createMarkup(data);\n\n    if (page >= data.totalPages) {\n      loadButton.classList.replace('load-more', 'load-more-hidden');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    lightbox.refresh();\n    smoothScroll();\n  } catch (error) {\n    console.error('error', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      position: 'topRight',\n    });\n  }\n}\n\nasync function handlerSubmit(evt) {\n  evt.preventDefault();\n\n  page = 1;\n\n  const searchInput = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (!searchInput) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    const data = await fetchImages(searchInput, page);\n\n    if (data.data.length === 0) {\n      gallery.innerHTML = '';\n      loadButton.classList.replace('load-more', 'load-more-hidden');\n\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n    } else {\n      gallery.innerHTML = createMarkup(data);\n\n      if (page < data.totalPages) {\n        loadButton.classList.replace('load-more-hidden', 'load-more');\n      }\n    }\n    lightbox.refresh();\n  } catch (error) {\n    console.error('error', error);\n  }\n}\n\nconst lightbox = new SimpleLightbox('.gallery a');\n"],"names":["API_KEY","BASE_URL","perPage","fetchImages","searchInput","page","url","response","axios","createMarkup","data","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","smoothScroll","cardHeight","inputForm","gallery","loadButton","handlerSubmit","handlerLoad","iziToast","lightbox","error","evt","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAU,GAEhB,eAAeC,EAAYC,EAAaC,EAAM,CAC5C,MAAMC,EAAM,GAAGL,SAAgBD,OAAaI,UAAoBC,cAAiBH,4DAC3EK,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAEpC,MAAO,CACL,KAAMC,EAAS,KAAK,KACpB,WAAY,KAAK,KAAKA,EAAS,KAAK,UAAYL,CAAO,CAC3D,CACA,CCdA,SAASO,EAAaC,EAAM,CAC1B,KAAM,CAAE,KAAMC,CAAQ,EAAGD,EACzB,OAAOC,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,8CACsCL;AAAA,kDACID,WAAsBE;AAAA;AAAA,mFAEWC;AAAA,mFACAC;AAAA,sFACGC;AAAA,uFACCC;AAAA;AAAA;AAAA,eAIlF,EACA,KAAK,EAAE,CACZ,CC1BA,SAASC,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CCHA,IAAIf,EAAO,EAEX,MAAMgB,EAAY,SAAS,eAAe,aAAa,EACjDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,UAAU,EAEpDF,EAAU,iBAAiB,SAAUG,CAAa,EAClDD,EAAW,iBAAiB,QAASE,CAAW,EAEhD,eAAeA,GAAc,CAC3BpB,GAAQ,EACR,GAAI,CACF,MAAMK,EAAO,MAAMP,EAAYkB,EAAU,SAAS,YAAY,MAAOhB,CAAI,EACzEiB,EAAQ,WAAab,EAAaC,CAAI,EAElCL,GAAQK,EAAK,aACfa,EAAW,UAAU,QAAQ,YAAa,kBAAkB,EAC5DG,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,GAEHC,EAAS,QAAO,EAChBR,GACD,OAAQS,EAAP,CACA,QAAQ,MAAM,QAASA,CAAK,EAC5BF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sDACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,eAAeF,EAAcK,EAAK,CAChCA,EAAI,eAAc,EAElBxB,EAAO,EAEP,MAAMD,EAAcyB,EAAI,cAAc,SAAS,YAAY,MAAM,OAEjE,GAAI,CAACzB,EAAa,CAChBsB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMhB,EAAO,MAAMP,EAAYC,EAAaC,CAAI,EAE5CK,EAAK,KAAK,SAAW,GACvBY,EAAQ,UAAY,GACpBC,EAAW,UAAU,QAAQ,YAAa,kBAAkB,EAE5DG,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,IAEDJ,EAAQ,UAAYb,EAAaC,CAAI,EAEjCL,EAAOK,EAAK,YACda,EAAW,UAAU,QAAQ,mBAAoB,WAAW,GAGhEI,EAAS,QAAO,CACjB,OAAQC,EAAP,CACA,QAAQ,MAAM,QAASA,CAAK,CAC7B,CACH,CAEA,MAAMD,EAAW,IAAIG,EAAe,YAAY"}